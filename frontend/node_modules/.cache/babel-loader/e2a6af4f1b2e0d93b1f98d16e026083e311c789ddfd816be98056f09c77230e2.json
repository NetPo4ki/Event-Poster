{"ast":null,"code":"import axios from'axios';const API_URL='http://localhost:8080/api';// Configure axios to send credentials with requests\naxios.defaults.withCredentials=true;// Set up auth token for requests\nconst setAuthToken=token=>{if(token){axios.defaults.headers.common['Authorization']=`Bearer ${token}`;}else{delete axios.defaults.headers.common['Authorization'];}};// Authentication\nexport const register=async userData=>{try{const response=await axios.post(`${API_URL}/register`,userData);return response.data;}catch(error){console.error('Error registering user:',error);throw error;}};export const login=async credentials=>{try{const response=await axios.post(`${API_URL}/login`,credentials);const{token,user}=response.data;// Store the token and user in localStorage\nlocalStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(user));// Set the auth token for all future requests\nsetAuthToken(token);return response.data;}catch(error){console.error('Error logging in:',error);throw error;}};export const logout=()=>{// Clear token and user from localStorage and axios headers\nlocalStorage.removeItem('token');localStorage.removeItem('user');setAuthToken(null);};export const getCurrentUser=async()=>{try{const response=await axios.get(`${API_URL}/me`);return response.data;}catch(error){console.error('Error getting current user:',error);throw error;}};// Initialize auth token from localStorage\nconst token=localStorage.getItem('token');if(token){setAuthToken(token);}// Event API calls\nexport const getEvents=async()=>{try{const response=await axios.get(`${API_URL}/events`);return response.data;}catch(error){console.error('Error fetching events:',error);throw error;}};export const getUserEvents=async()=>{try{const response=await axios.get(`${API_URL}/my-events`);return response.data;}catch(error){console.error('Error fetching user events:',error);throw error;}};export const getEvent=async id=>{try{const response=await axios.get(`${API_URL}/events/${id}`);return response.data;}catch(error){console.error(`Error fetching event ${id}:`,error);throw error;}};export const createEvent=async eventData=>{try{const response=await axios.post(`${API_URL}/events`,eventData);return response.data;}catch(error){console.error('Error creating event:',error);throw error;}};export const updateEvent=async(id,eventData)=>{try{const response=await axios.put(`${API_URL}/events/${id}`,eventData);return response.data;}catch(error){console.error(`Error updating event ${id}:`,error);throw error;}};export const deleteEvent=async id=>{try{await axios.delete(`${API_URL}/events/${id}`);}catch(error){console.error(`Error deleting event ${id}:`,error);throw error;}};// Registration API calls\nexport const getRegistrations=async eventId=>{try{let url=`${API_URL}/registrations`;if(eventId){url+=`?event_id=${eventId}`;}const response=await axios.get(url);return response.data;}catch(error){console.error('Error fetching registrations:',error);throw error;}};export const getUserRegistrations=async()=>{try{const response=await axios.get(`${API_URL}/my-registrations`);return response.data;}catch(error){console.error('Error fetching user registrations:',error);throw error;}};export const getRegistration=async id=>{try{const response=await axios.get(`${API_URL}/registrations/${id}`);return response.data;}catch(error){console.error(`Error fetching registration ${id}:`,error);throw error;}};export const createRegistration=async registrationData=>{try{const response=await axios.post(`${API_URL}/registrations`,registrationData);return response.data;}catch(error){console.error('Error creating registration:',error);throw error;}};export const updateRegistration=async(id,registrationData)=>{try{const response=await axios.put(`${API_URL}/registrations/${id}`,registrationData);return response.data;}catch(error){console.error(`Error updating registration ${id}:`,error);throw error;}};export const deleteRegistration=async id=>{try{await axios.delete(`${API_URL}/registrations/${id}`);}catch(error){console.error(`Error deleting registration ${id}:`,error);throw error;}};","map":{"version":3,"names":["axios","API_URL","defaults","withCredentials","setAuthToken","token","headers","common","register","userData","response","post","data","error","console","login","credentials","user","localStorage","setItem","JSON","stringify","logout","removeItem","getCurrentUser","get","getItem","getEvents","getUserEvents","getEvent","id","createEvent","eventData","updateEvent","put","deleteEvent","delete","getRegistrations","eventId","url","getUserRegistrations","getRegistration","createRegistration","registrationData","updateRegistration","deleteRegistration"],"sources":["/Users/netpo4ki/EventPoster/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://localhost:8080/api';\n\n// Configure axios to send credentials with requests\naxios.defaults.withCredentials = true;\n\n// Set up auth token for requests\nconst setAuthToken = (token) => {\n  if (token) {\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  } else {\n    delete axios.defaults.headers.common['Authorization'];\n  }\n};\n\n// Authentication\nexport const register = async (userData) => {\n  try {\n    const response = await axios.post(`${API_URL}/register`, userData);\n    return response.data;\n  } catch (error) {\n    console.error('Error registering user:', error);\n    throw error;\n  }\n};\n\nexport const login = async (credentials) => {\n  try {\n    const response = await axios.post(`${API_URL}/login`, credentials);\n    const { token, user } = response.data;\n    \n    // Store the token and user in localStorage\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(user));\n    \n    // Set the auth token for all future requests\n    setAuthToken(token);\n    \n    return response.data;\n  } catch (error) {\n    console.error('Error logging in:', error);\n    throw error;\n  }\n};\n\nexport const logout = () => {\n  // Clear token and user from localStorage and axios headers\n  localStorage.removeItem('token');\n  localStorage.removeItem('user');\n  setAuthToken(null);\n};\n\nexport const getCurrentUser = async () => {\n  try {\n    const response = await axios.get(`${API_URL}/me`);\n    return response.data;\n  } catch (error) {\n    console.error('Error getting current user:', error);\n    throw error;\n  }\n};\n\n// Initialize auth token from localStorage\nconst token = localStorage.getItem('token');\nif (token) {\n  setAuthToken(token);\n}\n\n// Event API calls\nexport const getEvents = async () => {\n  try {\n    const response = await axios.get(`${API_URL}/events`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching events:', error);\n    throw error;\n  }\n};\n\nexport const getUserEvents = async () => {\n  try {\n    const response = await axios.get(`${API_URL}/my-events`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user events:', error);\n    throw error;\n  }\n};\n\nexport const getEvent = async (id) => {\n  try {\n    const response = await axios.get(`${API_URL}/events/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error fetching event ${id}:`, error);\n    throw error;\n  }\n};\n\nexport const createEvent = async (eventData) => {\n  try {\n    const response = await axios.post(`${API_URL}/events`, eventData);\n    return response.data;\n  } catch (error) {\n    console.error('Error creating event:', error);\n    throw error;\n  }\n};\n\nexport const updateEvent = async (id, eventData) => {\n  try {\n    const response = await axios.put(`${API_URL}/events/${id}`, eventData);\n    return response.data;\n  } catch (error) {\n    console.error(`Error updating event ${id}:`, error);\n    throw error;\n  }\n};\n\nexport const deleteEvent = async (id) => {\n  try {\n    await axios.delete(`${API_URL}/events/${id}`);\n  } catch (error) {\n    console.error(`Error deleting event ${id}:`, error);\n    throw error;\n  }\n};\n\n// Registration API calls\nexport const getRegistrations = async (eventId) => {\n  try {\n    let url = `${API_URL}/registrations`;\n    if (eventId) {\n      url += `?event_id=${eventId}`;\n    }\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching registrations:', error);\n    throw error;\n  }\n};\n\nexport const getUserRegistrations = async () => {\n  try {\n    const response = await axios.get(`${API_URL}/my-registrations`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching user registrations:', error);\n    throw error;\n  }\n};\n\nexport const getRegistration = async (id) => {\n  try {\n    const response = await axios.get(`${API_URL}/registrations/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error fetching registration ${id}:`, error);\n    throw error;\n  }\n};\n\nexport const createRegistration = async (registrationData) => {\n  try {\n    const response = await axios.post(`${API_URL}/registrations`, registrationData);\n    return response.data;\n  } catch (error) {\n    console.error('Error creating registration:', error);\n    throw error;\n  }\n};\n\nexport const updateRegistration = async (id, registrationData) => {\n  try {\n    const response = await axios.put(`${API_URL}/registrations/${id}`, registrationData);\n    return response.data;\n  } catch (error) {\n    console.error(`Error updating registration ${id}:`, error);\n    throw error;\n  }\n};\n\nexport const deleteRegistration = async (id) => {\n  try {\n    await axios.delete(`${API_URL}/registrations/${id}`);\n  } catch (error) {\n    console.error(`Error deleting registration ${id}:`, error);\n    throw error;\n  }\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}